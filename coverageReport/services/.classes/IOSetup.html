<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html id="htmlId">
<head>
    <title>Coverage Report :: IOSetup</title>
    <style type="text/css">
        @import "../../.css/coverage.css";
    </style>
</head>

<body>
<div class="header"></div>

<div class="content">
    <div class="breadCrumbs">
        [ <a href="../../index.html">all classes</a> ]
        [ <a href="../index.html">services</a> ]
    </div>

    <h1>Coverage Summary for Class: IOSetup (services)</h1>

    <table class="coverageStats">

        <tr>
            <th class="name">Class</th>
            <th class="coverageStat
">
                Method, %
            </th>
            <th class="coverageStat
">
                Line, %
            </th>
        </tr>
        <tr>
            <td class="name">IOSetup</td>
            <td class="coverageStat">
  <span class="percent">
    70%
  </span>
                <span class="absValue">
    (7/ 10)
  </span>
            </td>
            <td class="coverageStat">
  <span class="percent">
    77.3%
  </span>
                <span class="absValue">
    (34/ 44)
  </span>
            </td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740</td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740$auxiliary$31WMWOTs</td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740$auxiliary$3vjVk4bV</td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740$auxiliary$D5Mxmin2</td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740$auxiliary$DiFgmjC5</td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740$auxiliary$h3ik32Iu</td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740$auxiliary$jc1d7HtS</td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740$auxiliary$nSAk1MiA</td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740$auxiliary$QTzie4Ee</td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740$auxiliary$vJV7DjT9</td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740$auxiliary$YYul8IMl</td>
        </tr>
        <tr>
            <td class="name">IOSetup$MockitoMock$2018578740$auxiliary$Z4T5KkEJ</td>
        </tr>
        <tr>
            <td class="name"><strong>total</strong></td>
            <td class="coverageStat">
  <span class="percent">
    70%
  </span>
                <span class="absValue">
    (7/ 10)
  </span>
            </td>
            <td class="coverageStat">
  <span class="percent">
    77.3%
  </span>
                <span class="absValue">
    (34/ 44)
  </span>
            </td>
        </tr>
    </table>

    <br/>
    <br/>


    <div class="sourceCode"><i>1</i>&nbsp;package services;
        <i>2</i>&nbsp;
        <i>3</i>&nbsp;import com.google.gson.Gson;
        <i>4</i>&nbsp;import model.Customer;
        <i>5</i>&nbsp;import org.apache.commons.cli.*;
        <i>6</i>&nbsp;
        <i>7</i>&nbsp;import java.io.*;
        <i>8</i>&nbsp;import java.util.ArrayList;
        <i>9</i>&nbsp;
        <i>10</i>&nbsp;/**
        <i>11</i>&nbsp; * &lt;p&gt;This class takes care of all
        <i>12</i>&nbsp; * the input and output initial setup
        <i>13</i>&nbsp; * and operations such as write and read.&lt;/p&gt;
        <i>14</i>&nbsp; */
        <i>15</i>&nbsp;public class IOSetup {
        <i>16</i>&nbsp;
        <i>17</i>&nbsp; private String inputFilePath;
        <i>18</i>&nbsp; private String outputFilePath;
        <i>19</i>&nbsp; private CommandLineParser parser;
        <i>20</i>&nbsp; private HelpFormatter helpFormatter;
        <i>21</i>&nbsp; private Options options;
        <i>22</i>&nbsp;
        <b class="fc"><i>23</i>&nbsp; public IOSetup(CommandLineParser parser, HelpFormatter formatter, Options options)
            {</b>
        <b class="fc"><i>24</i>&nbsp; this.parser = parser;</b>
        <b class="fc"><i>25</i>&nbsp; this.helpFormatter = formatter;</b>
        <b class="fc"><i>26</i>&nbsp; this.options = options;</b>
        <b class="fc"><i>27</i>&nbsp; }</b>
        <i>28</i>&nbsp;
        <i>29</i>&nbsp; /**
        <i>30</i>&nbsp; * To setup the cli with the required options.
        <i>31</i>&nbsp; *
        <i>32</i>&nbsp; * @param args the args passed by the user
        <i>33</i>&nbsp; * @return a list of all the customers as read from the input file given by the user
        <i>34</i>&nbsp; * @throws IOException when the file is not read properly
        <i>35</i>&nbsp; * @throws ParseException when the arguments are incorrect
        <i>36</i>&nbsp; */
        <i>37</i>&nbsp; public ArrayList&lt;Customer&gt; setUpCLI(String[] args) throws IOException, ParseException {
        <b class="fc"><i>38</i>&nbsp; CommandLine cmd = parser.parse(options, args);</b>
        <b class="fc"><i>39</i>&nbsp; if (cmd != null &amp;&amp; cmd.hasOption(&quot;-i&quot;) &amp;&amp; cmd.hasOption(&quot;-o&quot;))
            {</b>
        <b class="fc"><i>40</i>&nbsp; inputFilePath = cmd.getOptionValue(&quot;InputFile&quot;);</b>
        <b class="fc"><i>41</i>&nbsp; outputFilePath = cmd.getOptionValue(&quot;OutputFile&quot;);</b>
        <b class="fc"><i>42</i>&nbsp; return startReadFile();</b>
        <i>43</i>&nbsp; } else {
        <b class="fc"><i>44</i>&nbsp; helpFormatter.printHelp(&quot;Something went wrong&quot;, options);</b>
        <b class="fc"><i>45</i>&nbsp; throw new UnrecognizedOptionException(&quot;Invalid Exception&quot;);</b>
        <i>46</i>&nbsp; }
        <i>47</i>&nbsp; }
        <i>48</i>&nbsp;
        <i>49</i>&nbsp; /**
        <i>50</i>&nbsp; * to start the read file operation
        <i>51</i>&nbsp; *
        <i>52</i>&nbsp; * @return array list of customers
        <i>53</i>&nbsp; * @throws IOException in the event of wrong file or no file
        <i>54</i>&nbsp; */
        <i>55</i>&nbsp; public ArrayList&lt;Customer&gt; startReadFile() throws IOException {
        <b class="fc"><i>56</i>&nbsp; BufferedReader reader = new BufferedReader(new FileReader(inputFilePath));</b>
        <b class="fc"><i>57</i>&nbsp; return readFile(reader);</b>
        <i>58</i>&nbsp; }
        <i>59</i>&nbsp;
        <i>60</i>&nbsp; /**
        <i>61</i>&nbsp; * Reads the file, if the content inside the file is correct,
        <i>62</i>&nbsp; * a list of customer is created using the file data
        <i>63</i>&nbsp; *
        <i>64</i>&nbsp; * @param reader to read the desired file from thw give input
        <i>65</i>&nbsp; * @return array list of customers
        <i>66</i>&nbsp; * @throws IOException in the event of wrong file or no file
        <i>67</i>&nbsp; */
        <i>68</i>&nbsp; public ArrayList&lt;Customer&gt; readFile(BufferedReader reader) throws IOException {
        <b class="fc"><i>69</i>&nbsp; ArrayList&lt;Customer&gt; customers = new ArrayList&lt;&gt;();</b>
        <b class="fc"><i>70</i>&nbsp; String customerFromFile = null;</b>
        <b class="fc"><i>71</i>&nbsp; while ((customerFromFile = reader.readLine()) != null) {</b>
        <b class="fc"><i>72</i>&nbsp; Gson gson = new Gson();</b>
        <b class="fc"><i>73</i>&nbsp; Customer customer = gson.fromJson(customerFromFile, Customer.class);</b>
        <b class="fc"><i>74</i>&nbsp; customers.add(customer);</b>
        <b class="fc"><i>75</i>&nbsp; }</b>
        <b class="fc"><i>76</i>&nbsp; reader.close();</b>
        <b class="fc"><i>77</i>&nbsp; return customers;</b>
        <i>78</i>&nbsp; }
        <i>79</i>&nbsp;
        <i>80</i>&nbsp; /**
        <i>81</i>&nbsp; * To prepare for writing a file by intialising required Classes
        <i>82</i>&nbsp; *
        <i>83</i>&nbsp; * @param customers a list of customers that should be printed out
        <i>84</i>&nbsp; * @throws IOException in an event such as wrong file or no file
        <i>85</i>&nbsp; */
        <i>86</i>&nbsp; public void startWriteOutputFile(ArrayList&lt;Customer&gt; customers) throws IOException {
        <b class="nc"><i>87</i>&nbsp; FileOutputStream fos = new
            FileOutputStream(getOutputFilePath(outputFilePath));</b>
        <b class="nc"><i>88</i>&nbsp; DataOutputStream outputStream = new DataOutputStream(new
            BufferedOutputStream(fos));</b>
        <b class="nc"><i>89</i>&nbsp; writeOutputFile(customers, outputStream);</b>
        <b class="nc"><i>90</i>&nbsp; }</b>
        <i>91</i>&nbsp;
        <i>92</i>&nbsp; /**
        <i>93</i>&nbsp; * To get the output file path where the file will be written. The user may give the file
        location or file name.
        <i>94</i>&nbsp; * In either event there will be a output file.
        <i>95</i>&nbsp; *
        <i>96</i>&nbsp; * @param filePath as given by the user
        <i>97</i>&nbsp; * @return the filepath the output file will be stored
        <i>98</i>&nbsp; */
        <i>99</i>&nbsp; public String getOutputFilePath(String filePath) {
        <b class="fc"><i>100</i>&nbsp; if (filePath.contains(&quot;.txt&quot;)) {</b>
        <b class="fc"><i>101</i>&nbsp; return filePath;</b>
        <i>102</i>&nbsp; } else {
        <b class="fc"><i>103</i>&nbsp; return filePath + &quot;output.txt&quot;;</b>
        <i>104</i>&nbsp; }
        <i>105</i>&nbsp; }
        <i>106</i>&nbsp;
        <i>107</i>&nbsp; /**
        <i>108</i>&nbsp; * To write the output on a given output file path
        <i>109</i>&nbsp; *
        <i>110</i>&nbsp; * @param customers to be printed in a file
        <i>111</i>&nbsp; * @param outStream to perform the operations
        <i>112</i>&nbsp; * @throws IOException when there is any error while writing
        <i>113</i>&nbsp; */
        <i>114</i>&nbsp; public void writeOutputFile(ArrayList&lt;Customer&gt; customers, DataOutputStream outStream)
        throws IOException {
        <i>115</i>&nbsp;
        <b class="fc"><i>116</i>&nbsp; for (int i = 0; i &lt; customers.size(); i++) {</b>
        <b class="nc"><i>117</i>&nbsp; Customer c = customers.get(i);</b>
        <b class="nc"><i>118</i>&nbsp; outStream.writeChars(convertObjectToJson(c) + &quot;\n&quot;);</b>
        <i>119</i>&nbsp; }
        <b class="fc"><i>120</i>&nbsp; outStream.close();</b>
        <b class="fc"><i>121</i>&nbsp; startCheckIfOperationSuccess();</b>
        <b class="fc"><i>122</i>&nbsp; }</b>
        <i>123</i>&nbsp;
        <i>124</i>&nbsp; /**
        <i>125</i>&nbsp; * Creates a new object file and is used to check if the operation is success
        <i>126</i>&nbsp; */
        <i>127</i>&nbsp; public void startCheckIfOperationSuccess() {
        <b class="nc"><i>128</i>&nbsp; File file = new File(outputFilePath);</b>
        <b class="nc"><i>129</i>&nbsp; System.out.println(checkIfOperationSuccess(file));</b>
        <b class="nc"><i>130</i>&nbsp; }</b>
        <i>131</i>&nbsp;
        <i>132</i>&nbsp; /**
        <i>133</i>&nbsp; * To check if the operation was successful by checking if the output file exists.
        <i>134</i>&nbsp; *
        <i>135</i>&nbsp; * @param file outputfile
        <i>136</i>&nbsp; * @return print message to be used to print in the console
        <i>137</i>&nbsp; */
        <i>138</i>&nbsp; public String checkIfOperationSuccess(File file) {
        <i>139</i>&nbsp; String message;
        <b class="fc"><i>140</i>&nbsp; if (file.exists()) {</b>
        <b class="fc"><i>141</i>&nbsp; message = &quot;Success ! The path to the output is : /&quot; +
            file.getAbsolutePath();</b>
        <i>142</i>&nbsp; } else {
        <b class="fc"><i>143</i>&nbsp; message = &quot;Something went wrong, please try again&quot;;</b>
        <i>144</i>&nbsp; // Cannot use system.exit as the tests fail if used.
        <i>145</i>&nbsp; //System.exit(1);
        <i>146</i>&nbsp; }
        <b class="fc"><i>147</i>&nbsp; return message;</b>
        <i>148</i>&nbsp; }
        <i>149</i>&nbsp;
        <i>150</i>&nbsp; /**
        <i>151</i>&nbsp; * To convert any given customer to json
        <i>152</i>&nbsp; *
        <i>153</i>&nbsp; * @param customer that needs to be converted to json
        <i>154</i>&nbsp; * @return a json string of custome json object
        <i>155</i>&nbsp; */
        <i>156</i>&nbsp; public String convertObjectToJson(Customer customer) {
        <b class="nc"><i>157</i>&nbsp; return new Gson().toJson(customer);</b>
        <i>158</i>&nbsp; }
        <i>159</i>&nbsp;}
    </div>
</div>

<div class="footer">

    <div style="float:right;">generated on 2020-03-13 12:57</div>
</div>
</body>
</html>
